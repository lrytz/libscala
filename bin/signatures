#!/usr/bin/env bash
#
# bin/classes -cp /soft/jar/'*':/scala/inst/3/lib/'*'
#

source /r/jbash/jbash
set -e

jbash_usage=""
jbash_help=$(cat <<EOM
Prints each signature in the classes found on the given classpath.
EOM
)
jbash-command "$0" "$@"
cp-signatures "$jbashClasspath"


# 
# tmpfile=$(mktemp -t sigs)
# echo $tmpfile
# for cp in $(cp-expand "$jbashClasspath"); do
#   dir=$(jbash-explode $cp)
#   ( cd "$dir" && find . -name '*.class' | \
#     xargs 2>&1 -n 1 java -cp "$jbashClasspath:$jbash_home/.lib/javassist.jar" javassist.tools.Dump | \
#     grep '^signature: ' | \
#     perl -pe 's/^signature: //;'
#   )
# done

# cp-expand "$jbashClasspath" | foreach-stdin classnames %1 >$tmpfile
# append-classpath "$jbash_home/.lib/javassist.jar"
# 
# for line in $(cat $tmpfile); do
#   echo java -cp "$jbashClasspath" javassist.tools.Dump "$line"
#   
#   run-java javassist.tools.Dump "$line" 2>&1 | \
#   grep '^signature: ' | \
#   perl -pe 's/^signature: //;'
# done

# 
# while read -r line <$tmpfile; do
#   echo java -cp "$jbashClasspath" javassist.tools.Dump "$line"
# done
