#!/bin/sh
#

base="$1"
[[ -z $base ]] && base=master

for b in $(git-ls-branches); do
  count=$(git --no-pager log --oneline ${base}..${b} | wc -l)
  printf "%-25s %-30s %s\n" "$b" "$count commits not in $base" "merge-base is $(git describe --always $(git merge-base $base $b))"
done | sort -rnk2

  # 
  # 
  # echo git --no-pager log --oneline ${branch}.. % | \
  # while read -r cmd ; do printf "%-80s %s\n" "$cmd" $($cmd |wc -l) ; done | \
  # sort -rnk7
