#!/usr/bin/env bash
#

set -e

mkString () {
  local sep="$1"
  local first=1

  while read line; do
    if (( $first )); then
      first=0
      printf "%s" "$line"
    else
      printf "${sep}%s" "$line"
    fi
  done

  echo ""
}

script=$(readlink $0)
dir=$(dirname $script)/..
cd $dir

[[ -d lib_managed ]] || sbt update
[[ -d target/scala-2.9.1/classes ]] || sbt package
cp=$(find lib_managed -name '*.jar' | mkString ':'):target/scala-2.9.1/classes

scala29 -cp "$cp" improving.pullreq.Main "$@" 2>/dev/null
